<!DOCTYPE html>
<html lang="en">
  <head>
 
  </head>
  <body>
    <div id="greeting-div"></div>

    <script src="https://fb.me/react-15.0.0.js"></script>
    <script src="https://fb.me/react-dom-15.0.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/babel">
      var Greeting = React.createClass({

        getInitialState: function(){
            return{
              lstData: [],
            }
        },

       componentDidMount: function(){
         document.title = "Detail page";
              $.ajax({
                    method  : 'GET',
                    url     : "http://50.116.5.169/api/v1/allarticles/?l=en",
                    
                    success: function(res) {
                        this.setState({lstData:res})
                    }.bind(this),

                    error: function(e) {
                        console.log("error",e.statusText);
                    }
                })
          },

          render: function() {
            var lstData = this.state.lstData.map(function(i,index){
              if(i.id == localStorage['linkId'])
              {
                document.title = i.title;
                 var detail = i.title;
                 $('head').append( '<meta name="description" content="'+ detail +'">' );
                 //fb
                 $('head').append( '<meta property="og:type" content="'+ detail +'">' );
                 $('head').append( '<meta property="og:url" content="'+ detail +'">' );
                 $('head').append( '<meta property="og:image" content="'+ i.thumbnail +'">' );
                 $('head').append( '<meta property="og:description" content="'+ detail +'">' );
                 $('head').append( '<meta property="og:site_name" content="'+ detail +'">' );
                 $('head').append( '<meta property="article:published_time" content="'+ detail +'">' );
                 $('head').append( '<meta property="article:modified_time" content="'+ detail +'">' );
                 $('head').append( '<meta property="article:section" content="'+ detail +'">' );
                 $('head').append( '<meta property="article:tag" content="'+ detail +'">' );
                 $('head').append( '<meta property="fb:admins" content="'+ detail +'">' );
                 $('head').append( '<meta property="fb:pages" content="'+ detail +'">' );
                
                 //twitter
                 $('head').append( '<meta name="twitter:card" content="'+ detail +'">' );
                 $('head').append( '<meta name="twitter:site" content="'+ detail +'">' );
                 $('head').append( '<meta name="twitter:title" content="'+ detail +'">' );
                 $('head').append( '<meta name="twitter:description" content="'+ detail +'">' );
                 $('head').append( '<meta name="twitter:creator" content="'+ i.created_on +'">' );
                 $('head').append( '<meta name="twitter:image:src" content="'+ i.thumbnail +'">' );
                 
                 //google+
                 $('head').append( '<meta itemprop="name" content="'+ detail +'">' );
                 $('head').append( '<meta itemprop="description" content="'+ detail +'">' );
                 $('head').append( '<meta itemprop="image" content="'+ i.thumbnail +'">' );
                 
                return(
                  <div>
                    <h2>{i.title}</h2>
                    <p><img src={i.thumbnail} /></p>
                    <p>{i.created_on}</p>
                  </div>
                  );
              }
            },this)


              return (
              <div>
                <h1>This is Detail Page</h1>
                {lstData}
                <h3><a href="/index.html">Back Page</a> </h3>
                </div>
              )
          }
      });

      ReactDOM.render(
        <Greeting/>,
        document.getElementById('greeting-div')
      );
    </script>
  </body>
</html>